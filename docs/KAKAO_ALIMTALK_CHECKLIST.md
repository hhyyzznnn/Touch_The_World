# 카카오 알림톡 인증번호 발송 설정 체크리스트 ✅

> **참고**: 카카오 비즈니스 채널 개설 및 템플릿 심사가 필요합니다. (2-3일 소요)

## 📊 난이도 비교 요약

| 서비스 | 난이도 | 설정 시간 | 즉시 사용 |
|--------|--------|-----------|-----------|
| **카카오 알림톡 (대행사)** | ⭐⭐ | 30분-1시간 | ✅ 가능 |
| **카카오 알림톡 (직접)** | ⭐⭐⭐ | 2-3일 | ❌ 심사 필요 |

---

## 📋 사전 준비사항

- [ ] 사업자 등록증 준비
- [ ] 카카오 비즈니스 계정 생성
- [ ] 디케이테크인과의 서비스 계약 (필요시)

---

## 1단계: 카카오 비즈니스 채널 개설 (1-2일 소요)

### 1.1 비즈니스 채널 신청
- [ ] [카카오 비즈니스](https://bizmsg.kakao.com/) 접속
- [ ] 비즈니스 채널 개설 신청
- [ ] 사업자 등록증 제출
- [ ] 승인 대기 (1-2일)

### 1.2 채널 승인 완료 확인
- [ ] 채널 승인 완료 확인
- [ ] 발신 프로필 키(sender_key) 확인 및 복사

---

## 2단계: 템플릿 등록 및 심사 (1-2일 소요)

### 2.1 인증번호 발송 템플릿 작성
- [ ] 카카오 비즈니스 센터 접속
- [ ] 알림톡 템플릿 작성
- [ ] 템플릿 내용 예시:
  ```
  [터치더월드] 휴대폰 인증
  
  인증번호: #{인증번호}
  
  위 인증번호를 입력해주세요.
  (유효시간: 5분)
  ```
- [ ] 변수 설정: `#{인증번호}` 추가
- [ ] 템플릿 이름: "휴대폰 인증번호 발송" (또는 원하는 이름)

### 2.2 템플릿 심사 제출
- [ ] 템플릿 제출
- [ ] 카카오 심사 대기 (1-2일)
- [ ] 템플릿 코드(template_code) 확인 및 복사

---

## 3단계: API 키 발급 (20분)

### 3.1 카카오 개발자 센터 설정
- [ ] [카카오 개발자 센터](https://developers.kakao.com/) 접속
- [ ] 내 애플리케이션 만들기
- [ ] 앱 이름: "Touch The World" (또는 원하는 이름)
- [ ] 플랫폼 설정: 웹 플랫폼 추가

### 3.2 비즈니스 메시지 API 활성화
- [ ] 제품 설정 → 카카오 i Connect Message 활성화
- [ ] 서비스 계약 확인 (디케이테크인과 계약 필요)
- [ ] Client ID 발급 및 복사
- [ ] Client Secret 발급 및 복사

---

## 4단계: 환경 변수 설정 (5분)

### 4.1 로컬 개발 환경 (.env 파일)
```env
# 카카오 비즈니스 메시지 API
KAKAO_BM_CLIENT_ID="발급받은-Client-ID"
KAKAO_BM_CLIENT_SECRET="발급받은-Client-Secret"
KAKAO_BM_SENDER_KEY="발신-프로필-키"
KAKAO_BM_VERIFICATION_TEMPLATE_CODE="인증번호-템플릿-코드"
KAKAO_BM_BASE_URL="https://bizmsg-web.kakaoenterprise.com"
KAKAO_BM_SENDER_NO="발신-전화번호"  # 선택사항
```

- [ ] `.env` 파일에 위 내용 추가
- [ ] 값들이 올바르게 입력되었는지 확인

### 4.2 Vercel 프로덕션 환경
- [ ] [Vercel Dashboard](https://vercel.com/dashboard) 접속
- [ ] 프로젝트 선택 → **Settings** → **Environment Variables**
- [ ] 다음 환경 변수 추가:
  - [ ] `KAKAO_BM_CLIENT_ID`: 3단계에서 복사한 Client ID
  - [ ] `KAKAO_BM_CLIENT_SECRET`: 3단계에서 복사한 Client Secret
  - [ ] `KAKAO_BM_SENDER_KEY`: 1단계에서 복사한 발신 프로필 키
  - [ ] `KAKAO_BM_VERIFICATION_TEMPLATE_CODE`: 2단계에서 복사한 템플릿 코드
  - [ ] `KAKAO_BM_BASE_URL`: `https://bizmsg-web.kakaoenterprise.com` (기본값)
- [ ] 각 환경 변수 저장 확인

---

## 5단계: 테스트

### 5.1 로컬 테스트
- [ ] 개발 서버 실행:
  ```bash
  npm run dev
  ```
- [ ] 브라우저에서 `http://localhost:3000/register` 접속
- [ ] 전화번호 입력
- [ ] "인증 코드 발송" 버튼 클릭
- [ ] 터미널에 인증 코드 출력 확인 (개발 모드)
- [ ] 인증 코드 입력 및 확인

### 5.2 프로덕션 테스트
- [ ] Vercel 배포 완료 확인
- [ ] 프로덕션 URL에서 회원가입 페이지 접속
- [ ] 전화번호 입력
- [ ] "인증 코드 발송" 버튼 클릭
- [ ] 카카오톡으로 인증번호 수신 확인
- [ ] 인증 코드 입력 및 확인

---

## 🔍 문제 해결

### 문제: "OAuth 인증 실패" 오류
**증상**: 카카오 알림톡 발송 시 OAuth 인증 오류

**해결 방법:**
1. `KAKAO_BM_CLIENT_ID`와 `KAKAO_BM_CLIENT_SECRET` 확인
2. 카카오 개발자 센터에서 앱이 활성화되어 있는지 확인
3. 카카오 i Connect Message가 활성화되어 있는지 확인
4. 서비스 계약이 완료되었는지 확인

### 문제: "템플릿 코드가 올바르지 않습니다" 오류
**증상**: 템플릿 코드 오류

**해결 방법:**
1. `KAKAO_BM_VERIFICATION_TEMPLATE_CODE` 확인
2. 템플릿이 승인되었는지 확인
3. 템플릿 코드가 정확히 일치하는지 확인

### 문제: "발신 프로필 키가 올바르지 않습니다" 오류
**증상**: 발신 프로필 키 오류

**해결 방법:**
1. `KAKAO_BM_SENDER_KEY` 확인
2. 카카오 비즈니스 채널에서 발신 프로필 키 재확인
3. 채널이 승인되었는지 확인

### 문제: 카카오톡으로 메시지가 오지 않음
**증상**: 발송은 성공하지만 메시지 수신 안 됨

**해결 방법:**
1. 전화번호 형식 확인 (01012345678 형식)
2. 카카오톡이 설치되어 있는지 확인
3. 카카오 비즈니스 채널 구독 여부 확인
4. 템플릿이 승인되었는지 확인

---

## 📝 참고사항

### 개발 모드
- 카카오 알림톡 설정이 있으면 카카오 알림톡 사용
- 설정이 없으면 개발 모드 (터미널 출력)

### 템플릿 변수
- 템플릿에 `#{인증번호}` 변수가 포함되어 있어야 함
- 변수명은 템플릿에 등록된 것과 정확히 일치해야 함

### 전화번호 형식
- 입력: `010-1234-5678` 또는 `01012345678`
- 자동 변환: `821012345678` (국가코드 포함)

---

## ✅ 완료 확인

모든 단계를 완료했다면:
- [ ] 로컬에서 인증번호 발송 테스트 성공
- [ ] 프로덕션에서 카카오톡으로 인증번호 수신 확인
- [ ] 인증번호 입력 및 검증 성공
- [ ] 회원가입 완료 확인

---

## 📚 관련 문서

- [상세 설정 가이드](./KAKAO_ALIMTALK_VERIFICATION_SETUP.md)
- [서비스 비교](./SMS_VERIFICATION_COMPARISON.md)
- [카카오 비즈니스 메시지 공식 문서](https://docs.kakaoi.ai/kakao_i_connect_message/bizmessage/api/)

---

**작성일**: 2026-01-24  
**상태**: 구현 완료, 설정 대기 중
